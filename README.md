# Judaism Online

This project provides a simple web application for free blog posts, courses and informational pages about Judaism.
It uses the local Llama 3 model (via [Ollama](https://github.com/ollama/ollama)) to automatically generate content.

## Features

- Daily blog posts generated by AI (two posts per run of `daily_post.py`).
- Admin interface to create new blog posts and courses on demand and edit page content.
- Courses include difficulty levels and prerequisites.
- Automatically generated course overviews use Introduction, Main Content and
  Learning Expectations sections.
- Printable certificate page after completing a course.
- Certificates can also be emailed as PDFs.
- Full course pages display all sections together using a modern accordion layout.
- News section populated from the JTA API (`update_news.py`). The admin page
  shows when the news was last fetched.
- Optional `update_site.py` script automates creating posts, freezing the site
  and pushing updates to GitHub.
- Login and admin pages are only available when running the Flask app locally
  and are excluded from the static site. The navigation bar hides the related
  buttons when pages are frozen so they won't appear on GitHub Pages.

## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
2. Ensure an Ollama instance is running locally with the `llama3:8b` model.
3. Run the web app:
   ```bash
   python app.py
   ```
4. (Optional) Generate two daily blog posts from the command line:
   ```bash
   python daily_post.py
   ```
5. (Optional) Fetch the latest news items:
   ```bash
   python update_news.py
   ```
6. (Optional) Automatically create posts, freeze the site and push updates:
   ```bash
   python update_site.py
   ```

The application uses a SQLite database (`site.db`) created automatically on first run.

No user registration is required. After finishing a course and passing the quiz,
visitors can enter their name and email on the certificate page. A PDF certificate
will be generated and emailed automatically.

To send PDF certificates via email, provide SMTP details using the `SMTP_SERVER`,
`SMTP_PORT`, `SMTP_USER` and `SMTP_PASSWORD` environment variables. The sender
address can be configured from the admin page or via the `ADMIN_EMAIL`
environment variable.

Placeholder images used by the templates can be replaced in `static/`:

- `hero.jpg`
- `about.jpg`
- `contact.jpg`
- `faq.jpg`
- `news.jpg`

Set the admin password using the `ADMIN_PASSWORD` environment variable (defaults to `admin`).

## Deployment to GitHub Pages

You can generate a static version of the site using Frozen-Flask:

```bash
python freeze.py
```

The script initializes the database tables if needed and then writes the
generated HTML to the `docs/` directory.

A GitHub Actions workflow (`.github/workflows/gh-pages.yml`) automatically
freezes the site on every push to `main` and publishes the contents of `docs/`
to the `gh-pages` branch. Enable GitHub Pages for that branch in the repository
settings so the static site is available at `https://<username>.github.io/<repo>`.
The freezer now produces **relative URLs** so the site works correctly when
served from that sub-path. After generating or editing content locally, run
`python freeze.py` and push the updated `docs/` directory to trigger the
deployment workflow.

`update_site.py` provides a simple way to automate this process locally. It
creates new posts, freezes the site and pushes the result in a single command.
Run this script daily using your operating system's scheduler (e.g. `cron`).
Schedule it about an hour after your daily content generation so all new blog
posts and news items are included before the static site is pushed to GitHub.

Other static hosting platforms such as Netlify or Vercel can be used if you
prefer. Any service capable of serving the generated `docs/` directory will
work.
